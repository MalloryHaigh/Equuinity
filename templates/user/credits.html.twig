{% extends 'base.html.twig' %}

{% block title %}Credits{% endblock %}

{% block body %}
<style>
    .pricing-header {
        max-width: 700px;
    }

    .card-deck .card {
        min-width: 220px;
    }

    .border-top { border-top: 1px solid #e5e5e5; }
    .border-bottom { border-bottom: 1px solid #e5e5e5; }

    .box-shadow { box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05); }
</style>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body" style="">
                    <h1 align="center">Credit Shop</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-4" style="text-align: center;">
            <img src="{{ asset('horse-1.png') }}" style="height:450px;">
        </div>

        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                Credits are the Equuinity in-game currency, purchased with USD as needed. <br>
                With Credits, you can purchase in-game upgrades and features, and enrich your Equunity experience.
                <br><br>
                Your purchase helps fund development, additional art, feature expansion, and hosting expenses -- thank you for your support!<br><br>
                    <strong>Credits can be earned in-game by contests, trading between players, and random chance!</strong>
                </div>
            </div>
                <div class="row" style="">
                    <div class="col-lg-12">
                        <div class="card text-white bg-info">
                            <div class="card-body">
                                <h4 class="card-title text-white text-center">Credits are $1 USD each. Payment is secure via Stripe!</h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="width:60%;margin-left:auto;margin-right:auto;">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body" style="">
                                <div class="row">
                                    <div class="col-md-4">
                                        <input type="number" class="form-control form-control-lg quantity" value="25">
                                    </div>
                                    <div class="col-md-8">
                                        <button class="btn btn-lg btn-block btn-success checkout-button">Buy Credits</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        </div>
        </div>
    </div>

    <div class="row" style="margin-top:-40px">
        <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 class="display-4">Why Upgrade?</h1>
            <p class="lead">You don't have to upgrade to do well in Equuinity, but there are certainly perks to it! Learn more about the different account levels below.</p>
        </div>

        <div class="container" style="margin-bottom:50px;">
            <div class="card-deck mb-3 text-center">
                <div class="card mb-6 box-shadow">
                    <div class="card-header bg-info text-white">
                        <h3 class="my-0 font-weight-normal text-white">FREE ACCOUNTS</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-style-none">
                            <li><i class="fa fa-heart text-info"></i> Weekly salary of $3,000</li>
                            <li><i class="fa fa-heart text-info"></i> Bank interest of 0.15% per day</li>
                            <li><i class="fa fa-heart text-info"></i> Free access - forever!</li>
                            <li><i class="fa fa-heart text-info"></i> Run 5 shows per day</li>
                            <li><i class="fa fa-heart text-info"></i> Game experience supported by ads</li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-6 box-shadow">
                    <div class="card-header bg-info text-white">
                        <h3 class="my-0 font-weight-normal text-white">UPGRADED ACCOUNTS</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-style-none">
                            <li><i class="fa fa-heart text-info"></i> Have your own stable</li>
                            <li><i class="fa fa-heart text-info"></i> Bank interest of 0.25% per day</li>
                            <li><i class="fa fa-heart text-info"></i> Run for president of clubs and associations</li>
                            <li><i class="fa fa-heart text-info"></i> Higher weekly salary of $6,000</li>
                            <li><i class="fa fa-heart text-info"></i> Option to display a custom signature on forum posts</li>
                            <li><i class="fa fa-heart text-info"></i> Run up to 20 shows per day</li>
                            <li><i class="fa fa-heart text-info"></i> Sell training tokens to yourself or other players</li>
                            <li><i class="fa fa-heart text-info"></i> Ad-free game experience</li>
                        </ul>
                    </div>
                </div>
            </div>
    </div>

<div class="row">
    <div class="col-lg-4">
        <div class="card border-primary">
            <div class="card-header bg-primary text-center">
                <h3 class="mb-0 text-white">Upgrade - 1 Year</h3></div>
            <div class="card-body text-center">
                <p class="card-text">Upgrade for 365 days. Upgrades allow you to have a forum signature, board horses, run for club president, and more!</p>
                <a href="{{ path('upgrade', {'length': '365'}) }}" class="btn btn-lg btn-inverse"><img src="{{ asset('credit.png') }}" style="height:35px;"> 40 Credits</a>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card border-primary">
            <div class="card-header bg-primary text-center">
                <h3 class="mb-0 text-white">Upgrade - 6 Months</h3></div>
            <div class="card-body text-center">
                <p class="card-text">Upgrade for 180 days. Upgrades allow you to have a forum signature, board horses, run for club president, and more!</p>
                <a href="{{ path('upgrade', {'length': '180'}) }}" class="btn btn-lg btn-inverse"><img src="{{ asset('credit.png') }}" style="height:35px;"> 25 Credits</a>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card border-primary">
            <div class="card-header bg-primary text-center">
                <h3 class="mb-0 text-white">Upgrade - 1 Month</h3></div>
            <div class="card-body text-center">
                <p class="card-text">Upgrade for 30 days. Upgrades allow you to have a forum signature, board horses, run for club president, and more!</p>
                <a href="{{ path('upgrade', {'length': '30'}) }}" class="btn btn-lg btn-inverse"><img src="{{ asset('credit.png') }}" style="height:35px;"> 5 Credits</a>
            </div>
        </div>
    </div>
</div>



    <script type="text/javascript">
        // Create an instance of the Stripe object with your publishable API key
        var stripe = Stripe('pk_test_51IBXJUKlPATJCz9qNYlfnF0wG3N5LZv7lhBo3Gat2roU4KaAwsKV0mMVDbn01FBepoDtRkTlw0wdQbPxvGfFTDtr00S5crzEDx');
        var checkoutButton = document.getElementsByClassName('checkout-button')[0];



        checkoutButton.addEventListener('click', function () {
            var quantity = document.getElementsByClassName('quantity')[0].value;
            // Create a new Checkout Session using the server-side endpoint you
            // created in step 3.
            fetch('/credits/ajax/'+quantity+'', {
                method: 'POST',
            }).then(function (response) {
                return response.json();
            })
                .then(function (session) {
                    console.log("response", session);
                    return stripe.redirectToCheckout({ sessionId: session.id });
                })
                .then(function (result) {
                    // If `redirectToCheckout` fails due to a browser or network
                    // error, you should display the localized error message to your
                    // customer using `error.message`.
                    if (result.error) {
                        alert(result.error.message);
                    }
                })
                .catch(function (error) {
                    console.error('Error:', error);
                });
        });
    </script>
{% endblock %}
